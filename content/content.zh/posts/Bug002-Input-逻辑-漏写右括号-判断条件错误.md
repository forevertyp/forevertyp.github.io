***
# 🐛 Bug 002

Input-逻辑-漏写右括号-scanf判断条件错误

***

## 📌 基本信息
- 日期：2026-01-26
- 类型：#C语言 #Bug #逻辑错误    
- 场景：tic-tac-toe棋盘游戏
- 难度感受：⭐️⭐️⭐️⭐️⭐️

***

## 💥 错误表现
- 错误类型：逻辑错误
- 报错信息（原样粘贴）：
  无编译错误，但程序在读取棋盘数据时判断条件异常，行为不符合预期。

***

## 🧪 出错代码
```c
if (scanf("%d", &board[i][j]) != 1) {           
    // 错误处理
}

***
```


## 🧠 错误原因（⚠️最重要）

- 根本原因：  
    忘记在 `scanf` 参数后补上右括号 `)`，导致比较运算 `!= 1` 被错误地放进了参数中。
    
- 当时的错误想法：  
    以为自己写的是“判断 scanf 返回值是否不等于 1”，没有意识到括号少写了一边。
    
- 哪一步开始想歪了：  
    在快速敲代码时默认相信“自己括号是成对的”，没有再用眼睛逐字符检查条件表达式。
    

***

## ✅ 正确做法

```c
if (scanf("%d", &board[i][j]) != 1) {
    // 错误处理
}
```

***

## **关键点说明：**

- `scanf` 的返回值才应该和 `1` 作比较
    
- 比较运算 **一定写在函数调用外面**
    
- 少一个括号，代码仍然合法，但语义完全改变
    

***

## 🚩 教训总结（一句话)

> 以后只要看到 `scanf(...) != 1`，立刻想到 **先检查括号是否完整**

***

## 🔁 如何避免再次犯错

-  条件语句逐字符检查括号是否成对
    
-  对 `scanf / malloc / if` 等高风险语句放慢敲代码速度
    
-  必要时拆成两行写，降低出错概率
    

***

## 🔗 相关 Bug

- 逻辑-运算符优先级误判
    
- 输入输出-返回值判断错误
    
***
### 🧠 小评价（说句真心话）
这个 Bug **记得非常值**，因为它属于：

> ❗**不报错 + 看起来很对 + 后果很怪**

等你以后项目一大，这一类 Bug 会是主力杀手。